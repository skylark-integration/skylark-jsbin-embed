{"version":3,"sources":["scoop.js"],"names":["define","embeds","scoop","link","code","findCode","language","htmlcount","split","length","csscount","jscount","detectLanguage","query","search","substring","toLowerCase","indexOf","encodeURIComponent","replace"],"mappings":";;;;;;;AAAAA,QACE,YACA,SAASC,GAoCT,OAAOA,EAAOC,MAnBd,SAAeC,GACb,IAAIC,EAAOC,SAASF,GAChBG,EAjBN,SAAwBF,GACtB,IAAIG,EAAaH,EAAKI,MAAM,KAAKC,OAAS,EACtCC,EAAYN,EAAKI,MAAM,KAAKC,OAAS,EACrCE,EAAWP,EAAKI,MAAM,KAAKC,OAAS,EAExC,OAAIF,EAAYG,GAAYH,EAAYI,EAC/B,OACED,EAAWH,GAAaG,EAAWC,EACrC,MAEA,aAOMC,CAAeR,GAC1BS,EAAQV,EAAKW,OAAOC,UAAU,GAEjB,SAAbT,IAAgE,IAAzCF,EAAKY,cAAcC,QAAQ,WAEpDX,EAAW,SAGoB,IAA7BO,EAAMI,QAAQX,GAChBO,GAAS,IAAMP,EAAW,IAAMY,mBAAmBd,GAEnDS,EAAQA,EAAMM,QAAQb,EAAUA,EAAW,IAAMY,mBAAmBd,IAGtED,EAAKW,OAAS,IAAMD","file":"../scoop.js","sourcesContent":["define([\r\n  \"./embeds\"\r\n],function(embeds){\r\n\r\n  function detectLanguage(code) {\r\n    var htmlcount = (code.split('<').length - 1),\r\n        csscount = (code.split('{').length - 1),\r\n        jscount = (code.split('.').length - 1);\r\n\r\n    if (htmlcount > csscount && htmlcount > jscount) {\r\n      return 'html';\r\n    } else if (csscount > htmlcount && csscount > jscount) {\r\n      return 'css';\r\n    } else {\r\n      return 'javascript';\r\n    }\r\n  }\r\n\r\n\r\n  function scoop(link) {\r\n    var code = findCode(link),\r\n        language = detectLanguage(code),\r\n        query = link.search.substring(1);\r\n\r\n    if (language === 'html' && code.toLowerCase().indexOf('<html') === -1) {\r\n      // assume this is an HTML fragment - so try to insert in the %code% position\r\n      language = 'code';\r\n    }\r\n\r\n    if (query.indexOf(language) === -1) {\r\n      query += ',' + language + '=' + encodeURIComponent(code);\r\n    } else {\r\n      query = query.replace(language, language + '=' + encodeURIComponent(code));\r\n    }\r\n\r\n    link.search = '?' + query;\r\n  }\r\n\r\n  return embeds.scoop = scoop;\r\n});"]}