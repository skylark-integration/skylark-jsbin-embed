{"version":3,"sources":["embed.js"],"names":["define","getQuery","embeds","inview","hookMessaging","embed","link","iframe","document","createElement","url","href","replace","className","id","style","border","query","search","width","minHeight","height","maxHeight","src","split","_src","setAttribute","pending","push","parentNode","replaceChild"],"mappings":";;;;;;;AAAAA,QACE,8BACA,WACA,WACA,mBACA,SAASC,EAASC,EAAOC,EAAOC,GAChC,aAiCA,OAAOF,EAAOG,MA/Bd,SAAeC,GACb,IAAIC,EAASC,SAASC,cAAc,UAChCC,EAAMJ,EAAKK,KAAKC,QAAQ,OAAQ,SAEpCL,EAAOM,UAAYP,EAAKO,UACxBN,EAAOO,GAAKR,EAAKQ,GACjBP,EAAOQ,MAAMC,OAAS,iBAEtB,IAAIC,EAAQhB,EAASK,EAAKY,QAC1BX,EAAOQ,MAAMI,MAAQF,EAAME,OAAS,OACpCZ,EAAOQ,MAAMK,UAAYH,EAAMI,QAAU,QACrCJ,EAAMI,SACRd,EAAOQ,MAAMO,UAAYL,EAAMI,QAI7BlB,EAAOG,EAAM,MAEfC,EAAOgB,IAAMb,EAAIc,MAAM,KAAK,GAC5BjB,EAAOkB,KAAOf,EAAIc,MAAM,KAAK,GAC7BpB,EAAcG,KAEdA,EAAOmB,aAAa,WAAYhB,GAChCH,EAAOgB,IAAM,kCAEbI,QAAQC,KAAKrB,IAGfD,EAAKuB,WAAWC,aAAavB,EAAQD","file":"../embed.js","sourcesContent":["define([\r\n  \"skylark-langx-urls/getQuery\",\r\n  \"./embeds\",\r\n  \"./inview\",\r\n  \"./hookMessaging\"\r\n],function(getQuery,embeds,inview,hookMessaging){\r\n  'use strict';\r\n  \r\n  function embed(link) {\r\n    var iframe = document.createElement('iframe');\r\n    var url = link.href.replace(/edit/, 'embed');\r\n\r\n    iframe.className = link.className; // inherit all the classes from the link\r\n    iframe.id = link.id; // also inherit, giving more style control to the user\r\n    iframe.style.border = '1px solid #aaa';\r\n\r\n    var query = getQuery(link.search);\r\n    iframe.style.width = query.width || '100%';\r\n    iframe.style.minHeight = query.height || '300px';\r\n    if (query.height) {\r\n      iframe.style.maxHeight = query.height;\r\n    }\r\n\r\n    // track when it comes into view and reload\r\n    if (inview(link, 100)) {\r\n      // the iframe is full view, let's render it\r\n      iframe.src = url.split('&')[0];\r\n      iframe._src = url.split('&')[0]; // support for google slide embed\r\n      hookMessaging(iframe);\r\n    } else {\r\n      iframe.setAttribute('data-url', url);\r\n      iframe.src = 'https://jsbin.com/embed-holding';\r\n\r\n      pending.push(iframe);\r\n    }\r\n\r\n    link.parentNode.replaceChild(iframe, link);\r\n  }\r\n\r\n  return embeds.embed = embed;\r\n});"]}